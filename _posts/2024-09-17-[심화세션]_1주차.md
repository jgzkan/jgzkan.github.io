---
layout: post
title: "[심화세션]_1주차"
published: true
date: 2024-09-17
math: true
categories: 
tags: KHUDA 심화세션
---

# 사전 학습 정리 #

# 교재 #
- 주교재: [파이썬 데이터 분석 실무 테크닉 100]
- 부교재: [통계101 x 데이터 분석]


# 주교재 #

## [1장] 웹에서 주문 수를 분석하는 테크닉 10 ##

![img0](assets/img/DBRS_week1/img0.png)

![img1](assets/img/DBRS_week1/img1.png)

### 1. 데이터를 읽어들이자 ###

```python
# pandas 임포트, 변수에 파일 저장, 데이터의 첫 5행 표시
import pandas as pd
customer_master = pd.read.csv('customer_master.csv')
customer_master.head()

item_master = pd.read.csv('item_master.csv')
item_master.head()

transaction_1 = pd.read.csv('transaction.csv')
transaction_1.head()

transaction_detail_1 = pd.read.csv('transaction_detail_1.csv')
transaction_detail_1.head()
```


### 2. 데이터 결합(union) ###

```python
transaction_2 = pd.read_csv('transaction_2.csv')
transaction = pd.concat([transaction_1, transaction_2], ignore_index = True)
transaction.head()
# .head()로는 제대로 결합됐는지 알 수 없음

print(len(transaction_1))
print(len(transaction_1))
print(len(transaction_1))
# 5000 1786 6786  -> 제대로 유니언된 것을 확인할 수 있다. 
```


### 3. 매출 데이터끼리 결합(join) ###

transaction_detail 기준, transaction의 payment_date, customer_id 칼럼 추가

공통 데이터 칼럼: transaction_id

```python
join_data = pd.merge(transaction_detail, transaction[["transaction_id", "payment_date", "customer_id"], on "transaction_id", how = "left"])
join_data.head()
```
![img2](assets/img/DBRS_week1/img2.png)

```python
print(len(transaction_detail))
print(len(transaction))
print(len(join_data))
# 7144 6786 7144
```


### 4. 마스터데이터 결합(조인) ##

```python
join_data = pd.merge(join_data, customer_master, on = "customer_id", how = "left")
join_data = pd.merge(join_data, item_master, on = "item_id", how = "left")
join_data.head()
```
![img3](assets/img/DBRS_week1/img3.png)


### 5. 필요한 데이터 칼럼 만들기 ###

매출 = quantity * item_price

```python
join_data["price"] = join_data["quantity"] * join_data["item_price"]
join_data[["quantity", "item_price", "price"]].head()
```
![img4](assets/img/DBRS_week1/img4.png)


### 6. 데이터 검산 ###

```python
print(join_data["price"].sum())
print(transaction["price"].sum())
# 971135000 971135000

join_data["price"].sum() == transaction["price"].sum()
# True
```

틀린 데이터로 분석하지 않도록 데이터 가공 후 검산은 항상 신경 써야 한다. 


### 7. 통계량 파악 ###

![img5](assets/img/DBRS_week1/img5.png)

- isnull(): 결손치가 True/False로 반환
- .isnull().sum(): 결손치 True 개수 합계

```python
print(join_data["payment_date"].min())
print(join_data["payment_date"].max())
# 2019-02-01  2019-07-31
```


### 8. 월별 데이터 집계 ###

과거 몇 년 간의 데이터에서 특정 범위 데이터만 추출해 월별로 매출 증감 파악

1. payment_date 데이터형 확인

![img6](assets/img/DBRS_week1/img6.png)

payment_date가 object형임을 확인

```python
join_data["payment_date"] = pd.to_datetime(join_data["payment_date"])
join_data["payment_month"] = join_data["payment_date"].dt.strftime("%Y%m")
join_data[["payment_date", "payment_month"].head()]
```
![img7](assets/img/DBRS_week1/img7.png)

- datetime의 dt를 사용해 년, 월 추출 & strftime 사용해 연월 작성

```python
join_data.groupby("payment_month").sum()["price"]
```
![img8](assets/img/DBRS_week1/img8.png)

- groupby: 집계 칼럼(payment_month)과 집계 방법(sum) 기술, price만 표시하기 위해 칼럼 지정


### 9. 월별, 상품별 데이터 집계 ###

groupby를 이용해 월별, 상품별 매출의 합계, 수량을 표시해보자. 

![img9](assets/img/DBRS_week1/img9.png)

groupby에서 출력하고 싶은 칼럼이 여러 개 -> 리스트형으로 지정


> pivot_table을 사용해 다시 집계

![img10](assets/img/DBRS_week1/img10.png)

- pivot_table: 행, 칼럼 지정 가능. 행에는 상품명, 칼럼에는 월이 오게 index & columns 지정. values에는 집계하고 싶은 칼럼(price, quantity), aggfunc에는 집계 방법(sum)을 지정


### 10. 상품별 매출 추이 가시화 ###

가시화 과정:

1. 데이터 집계
2. 집계된 데이터를 이용해 그래프 그리기

![img11](assets/img/DBRS_week1/img11.png)

![img12](assets/img/DBRS_week1/img12.png)


<br/>
<br/>

## [2장] 대리점 데이터를 가공하는 테크닉 10 ##

손으로 데이터를 입력하다 보면 입력 실수나 데이터 누락 등 '오류'가 많이 포함되기 마련이다. 

![img13](assets/img/DBRS_week1/img13.png)


### 11. 데이터 읽어 들이기 ###

```python

```




```python

```




```python

```



```python

```



```python

```



```python

```



```python

```



```python

```



```python

```



```python

```


# 부교재 #


## [1장] 통계학이란? :데이터 분석에서 통계학의 역할  ##



## [2장] ##


## [3장] ##


# 세션 내용 정리 #

